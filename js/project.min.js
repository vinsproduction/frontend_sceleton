var PrototypeModel;PrototypeModel=function(){function a(){}return a}();var IndexView,PrototypeView,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};PrototypeView=function(){function a(){}return a.prototype.varconstants={},a.prototype.preconstructor=function(){},a.prototype.generateRenders=function(a){var b=this;return null==a&&(a=this.template),_.each(a,function(a,c){return b.templateSourse||(b.templateSourse={}),b.templateSourse[c]=$.trim(a.html()),b.render||(b.render={}),b.render[c]=function(){return b.doRender(c,b.template[c],b.templateSourse[c])},b.preRender||(b.preRender={}),b.preRender[c]=function(a){return null==a&&(a={}),b.doPreRender(c,b.template[c],a)}}),this.renderAll=function(){return _.each(a,function(a,c){return b.render[c]()})}},a.prototype.doPreRender=function(a,b,c){var d,e,f,g,h;try{return f=null!=(h=c.t)?h:"Загрузка...",g=parseInt(c.w)+"px"||"100%",e=parseInt(c.h)+"px"||"100px",console.log("[preRender "+a+"] loadtext:",f),f?b.css({"background-color":"#FFF"}).html('<div style="padding:10px;height:'+e+";width:"+g+';"><center>'+f+"</center></div>"):b.empty()}catch(i){return d=i,console.error("template undefined"),console.error(d)}},a.prototype.doRender=function(a,b,c,d){return null==d&&(d=this.vars),console.log("[Render "+a+"] @vars:",this.vars),b.removeAttr("style").html(Mustache.to_html(c,d))},a.prototype.resize=function(){var a,b,c,d;return c={el:$("body > main > .sections")},b=parseInt($("body > main > header").height()),a=parseInt($("body > main > footer").height()),d=parseInt($("body > main > .sections").height()),$(window).height()<=d+b+a?(c.height=d,c.el.height(c.height),$("body > main > footer").removeClass("fixed")):(c.height="auto",c.el.height(c.height),$("body > main > footer").addClass("fixed")),app.debugBox.log("sect","header: "+b+"px | sections: "+d+"px | footer: "+a+"px"),app.debugBox.log("res",""+$(window).width()+"px x "+$(window).height()+"px")},a}(),IndexView=function(a){function b(){var a=this;this.preconstructor(),this.el=$("section#index"),this.resizeit(),$(window).resize(function(){return a.resizeit()})}return __extends(b,a),b.prototype.resizeit=function(){return this.resize("fixed")},b.prototype.controller=function(){},b}(PrototypeView);var AppRouter,_ref,__hasProp={}.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};Backbone.Router.prototype.before=function(){},Backbone.Router.prototype.after=function(){},Backbone.Router.prototype.route=function(a,b,c){var d;return _.isRegExp(a)||(a=this._routeToRegExp(a)),_.isFunction(b)&&(c=b,b=""),c||(c=this[b]),d=this,Backbone.history.route(a,function(e){var f;return f=d._extractParameters(a,e),d.before.apply(d,arguments),c&&c.apply(d,f),d.after.apply(d,arguments),d.trigger.apply(d,["route:"+b].concat(f)),d.trigger("route",b,f),Backbone.history.trigger("route",d,b,f)})},AppRouter=function(a){function b(){return _ref=b.__super__.constructor.apply(this,arguments)}return __extends(b,a),b.prototype.routes={"":"index","!":"index","!/":"index","!/ooops":"ooops","!/ooops/":"ooops","!/ie":"ie","!/ie/":"ie","*path":"notFound"},b.prototype.before=function(a){return""!==a&&console.debug("[Route]",a),$("body").scrollTop(0)},b.prototype.after=function(){},b.prototype.initialize=function(){return this.bind("all",function(){})},b.prototype.changeBg=function(a){return null==a&&(a=""),$(".background").removeClass("bg-1"),""!==a?$(".background").addClass(a):void 0},b.prototype.notFound=function(){},b.prototype.ooops=function(){},b.prototype.ie=function(){},b.prototype.index=function(){},b}(Backbone.Router);var App,__indexOf=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};App=function(){function a(a){var b;null==a&&(a={}),this.name="project",this.localhost=""===window.location.host,this.host=this.localhost?"http://"+this.name:window.location.host,this.root=a.root||"",this.debug=function(){var a;return a=$$.urlParam("debug"),a?a.split(","):[]}(),!$$.browser.msie&&this.localhost&&(b=777,$$.includeJS("http://localhost:"+b+"/livereload.js"),console.debug("[Livereload] http://localhost:"+b+"/livereload.js")),$$.browser.msie6||$$.browser.msie7||this.libs()}return a.prototype.init=function(){var a=this;return $(function(){return __indexOf.call(a.debug,"box")>=0&&a.debugBox.init(),a.initViews(),a.router=new AppRouter,Backbone.history.start(),a.social.init(),console.debug("[App::init] debug:",a.debug,a)})},a.prototype.initViews=function(){return this.views={index:new IndexView}},a.prototype.redirect=function(a){return null==a&&(a=""),this.router.navigate(a,!0)},a.prototype.debugBox={init:function(){return $("body").append('<div id="debugBox" style="font-size: 14px;background: rgba(0,0,0,0.6);position:fixed;z-index:10000; right:5px; bottom:5px;color:white; padding: 10px;">\n	debug box\n	<pre class="res">resolution: <span></span></pre>\n	<div class="sect"></div>\n	<div class="log"></div>\n	<pre class="mediaHeight" style="color:red;"></pre>\n	<pre class="mediaWidth" style="color:red;"></pre>\n</div>')},color:function(){return $("#debugBox").find(".log pre:nth-child(2n)").css({color:"gray"})},log:function(a,b){return"log"===a?$("#debugBox .log").append("<pre>"+b+"</pre>"):"sect"===a?$("#debugBox .sect").html("<pre>"+b+"</pre>"):"res"===a&&$("#debugBox .res span").html(""+b),app.debugBox.color()}},a.prototype.libs=function(){return jQuery.support.cors=!0,jQuery.ajaxSetup({cache:!1,crossDomain:!0})},a.prototype.social={defaults:{vkontakteApiId:"",facebookApiId:"",odnoklassnikiApiId:""},init:function(){var a;return a=function(){return app.social.url=this.host,VK&&VK.init({apiId:app.social.vkontakteApiId}),FB?FB.init({appId:app.social.facebookApiId,status:!0,cookie:!0,xfbml:!0,oauth:!0}):void 0}},wallPost:{vkontakte:function(a){return null==a&&(a={}),VK.api("wall.post",{owner_id:a.owner_id,message:a.message},function(b){return!b||b.error?(console.error("[socWallPost Vkontakte] error",b),a.error&&a.error()):(console.debug("[socWallPost Vkontakte] success"),a.success&&a.success()),a.allways?a.allways():void 0})},facebook:function(a){return null==a&&(a={}),FB.ui({to:a.to,method:"feed",link:a.link||app.social.url,picture:a.picture||"",name:a.name||"",description:a.description||"",caption:a.caption||""},function(b){return b?(console.debug("[socWallPost Facebook] success"),a.success&&a.success()):(console.error("[socWallPost Facebook] error",b),a.error&&a.error()),a.allways?a.allways():void 0})},odnoklassniki:function(a){var b;return null==a&&(a={}),b=a.url||app.social.url,window.open("http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl="+encodeURIComponent(b)+"&st.comments="+encodeURIComponent(a.comments),"","toolbar=0,status=0,width=626,height=436")}},share:{vkontakte:function(a){var b;return null==a&&(a={}),a.url=a.url||app.social.url,b="http://vkontakte.ru/share.php?",b+="url="+encodeURIComponent(a.url),b+="&title="+encodeURIComponent(a.title),b+="&description="+encodeURIComponent(a.text),b+="&image="+encodeURIComponent(a.img),b+="&noparse=true",this.popup(b)},odnoklassniki:function(a){var b;return null==a&&(a={}),a.url=a.url||app.social.url,b="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1",b+="&st.comments="+encodeURIComponent(a.text),b+="&st._surl="+encodeURIComponent(a.url),this.popup(b)},facebook:function(a){var b;return null==a&&(a={}),a.url=a.url||app.social.url,b="http://www.facebook.com/sharer.php?s=100",b+="&p[title]="+encodeURIComponent(a.title),b+="&p[summary]="+encodeURIComponent(a.text),b+="&p[url]="+encodeURIComponent(a.url),b+="&p[images][0]="+encodeURIComponent(a.img),this.popup(b)},twitter:function(a){var b;return null==a&&(a={}),a.url=a.url||app.social.url,b="http://twitter.com/share?",b+="text="+encodeURIComponent(a.title),b+="&url="+encodeURIComponent(a.url),b+="&counturl="+encodeURIComponent(a.url),this.popup(b)},mailru:function(a){var b;return null==a&&(a={}),a.url=a.url||app.social.url,b="http://connect.mail.ru/share?",b+="url="+encodeURIComponent(a.url),b+="&title="+encodeURIComponent(a.title),b+="&description="+encodeURIComponent(a.text),b+="&imageurl="+encodeURIComponent(a.img),this.popup(b)},popup:function(a){return window.open(a,"","toolbar=0,status=0,width=626,height=436")}}},a.prototype.erros={popup:function(a){var b;return b=this.getError(a),customPopup("Ошибка!",b,!0)},get:function(a){var b,c;return b=this.errors_ru(),$$.isObject(a)?(c="",_.each(a,function(a){return a=b[a]||a,c+=a+"<br/><br/>"})):c=b[a],c||"Неизвестная ошибка"},ru:function(){return{Error_1:"Первая ошибка"}}},a}();