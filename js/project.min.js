var App;App=function(){function a(){var a;this.name="TPS",this.localhost=""===window.location.host,this.host=this.localhost?"http://"+this.name:window.location.host,this.root=this.localhost?this.host:"",this.debug=function(){var a;return a=$$.urlParam("debug"),a?a.split(","):[]}(),!$$.browser.msie&&this.localhost&&(a=35829,$$.includeJS("http://localhost:"+a+"/livereload.js"),console.debug("[Livereload::init] port "+a)),$$.browser.msie6||$$.browser.msie7||this.libs()}return a.prototype.init=function(){var a=this;return $(function(){return a.social.init(),console.debug("[App::init] debug:",a.debug,a)})},a.prototype.libs=function(){return jQuery.support.cors=!0,jQuery.ajaxSetup({cache:!1,crossDomain:!0})},a.prototype.social={defaults:{vkontakteApiId:"3819447",facebookApiId:"228658570618080",odnoklassnikiApiId:"192750592"},init:function(){var a;return a=function(){return app.social.url=this.host,VK&&VK.init({apiId:app.social.vkontakteApiId}),FB?FB.init({appId:app.social.facebookApiId,status:!0,cookie:!0,xfbml:!0,oauth:!0}):void 0}},wallPost:{vkontakte:function(a){return null==a&&(a={}),VK.api("wall.post",{owner_id:a.owner_id,message:a.message},function(b){return!b||b.error?(console.error("[socWallPost Vkontakte] error",b),a.error&&a.error()):(console.debug("[socWallPost Vkontakte] success"),a.success&&a.success()),a.allways?a.allways():void 0})},facebook:function(a){return null==a&&(a={}),FB.ui({to:a.to,method:"feed",link:a.link||app.social.url,picture:a.picture||"",name:a.name||"",description:a.description||"",caption:a.caption||""},function(b){return b?(console.debug("[socWallPost Facebook] success"),a.success&&a.success()):(console.error("[socWallPost Facebook] error",b),a.error&&a.error()),a.allways?a.allways():void 0})},odnoklassniki:function(a){var b;return null==a&&(a={}),b=a.url||app.social.url,window.open("http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1&st._surl="+encodeURIComponent(b)+"&st.comments="+encodeURIComponent(a.comments),"","width=600,height=380")}},share:{vkontakte:function(a,b,c,d){var e;return e="http://vkontakte.ru/share.php?",e+="url="+encodeURIComponent(a),e+="&title="+encodeURIComponent(b),e+="&description="+encodeURIComponent(d),e+="&image="+encodeURIComponent(c),e+="&noparse=true",this.popup(e)},odnoklassniki:function(a,b){var c;return c="http://www.odnoklassniki.ru/dk?st.cmd=addShare&st.s=1",c+="&st.comments="+encodeURIComponent(b),c+="&st._surl="+encodeURIComponent(a),this.popup(c)},facebook:function(a,b,c,d){var e;return e="http://www.facebook.com/sharer.php?s=100",e+="&p[title]="+encodeURIComponent(b),e+="&p[summary]="+encodeURIComponent(d),e+="&p[url]="+encodeURIComponent(a),e+="&p[images][0]="+encodeURIComponent(c),this.popup(e)},twitter:function(a,b){var c;return c="http://twitter.com/share?",c+="text="+encodeURIComponent(b),c+="&url="+encodeURIComponent(a),c+="&counturl="+encodeURIComponent(a),this.popup(c)},mailru:function(a,b,c,d){var e;return e="http://connect.mail.ru/share?",e+="url="+encodeURIComponent(a),e+="&title="+encodeURIComponent(b),e+="&description="+encodeURIComponent(d),e+="&imageurl="+encodeURIComponent(c),this.popup(e)},popup:function(a){return window.open(a,"","toolbar=0,status=0,width=626,height=436")}}},a.prototype.erros={popup:function(a){var b;return b=this.getError(a),customPopup("Ошибка!",b,!0)},get:function(a){var b,c;return b=this.errors_ru(),$$.isObject(a)?(c="",_.each(a,function(a){return a=b[a]||a,c+=a+"<br/><br/>"})):c=b[a],c||"Неизвестная ошибка"},ru:function(){return{Error_1:"Первая ошибка"}}},a}();